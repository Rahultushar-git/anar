<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ANAR ‚Äî Anonymous Chat</title>
<style>
  :root{
    --you-bg: #d7ecff;
    --anon-bg: #eef1f3;
    --chat-bg: #fafafa;
    --accent: #fbc531;
    --text: #0b1220;
    --anon-text: #f1c40f; /* yellow */
  }

  html,body{height:100%;margin:0;background:#fff;font-family:Arial,Helvetica,sans-serif;color:var(--text)}
  .app {
    height:100vh;
    display:flex;
    flex-direction:column;
  }

  .header{
    background: linear-gradient(90deg,#fbc531,#e1b12c);
    padding:14px 16px;
    color:#000;
    font-weight:700;
    text-align:center;
  }

  .desc{
    padding:10px 16px;
    text-align:center;
    font-size:0.95rem;
    color:#333;
    border-bottom:1px solid #eee;
  }

  #chat {
    flex:1;
    padding:16px;
    background:var(--chat-bg);
    overflow-y:auto;
    display:flex;
    flex-direction:column;
    gap:8px;
  }

  .message-row {
    display:flex;
    width:100%;
  }
  .message-row.you { justify-content:flex-end; }
  .message-row.anon { justify-content:flex-start; }

  .msg {
    max-width:78%;
    word-break:break-word;
    border-radius:14px;
    padding:10px 14px;
    box-shadow: 0 1px 2px rgba(0,0,0,0.04);
    font-size:0.95rem;
    line-height:1.2;
    display:flex;
    flex-direction:column;
    gap:6px;
  }

  .msg .label { font-weight:900; font-size:0.9rem; } /* more bold */
  .msg .text { white-space:pre-wrap; }

  .msg.you { background:var(--you-bg); color:var(--text); }
  .msg.anon { background:var(--anon-bg); color:var(--anon-text); } /* yellow text */

  .input-area{
    display:flex;
    gap:8px;
    padding:10px;
    border-top:1px solid #e6e6e6;
    align-items:center;
    background:#fff;
  }

  .input-area input{
    flex:1;
    padding:10px 12px;
    border-radius:20px;
    border:1px solid #ccc;
    outline:none;
    font-size:1rem;
  }

  .input-area button{
    background:var(--accent);
    border:none;
    padding:10px 16px;
    border-radius:18px;
    cursor:pointer;
    font-weight:700;
  }

  .footer{
    text-align:center;
    padding:8px 10px;
    font-size:0.85rem;
    background:#f2f2f2;
    border-top:1px solid #e6e6e6;
  }

  @media (max-width:480px){
    .msg { max-width:88%; font-size:0.95rem; }
    .header { font-size:1rem; padding:12px; }
  }
</style>
</head>
<body>
  <div class="app">
    <div class="header">üí¨ ANAR - A New Anonymous Realm</div>
    <div class="desc">Private chat with no login, no username, and no stored messages. Refresh to clear.</div>

    <div id="chat" aria-live="polite" role="log"></div>

    <div class="input-area">
      <input id="msg" type="text" placeholder="Type a message..." autocomplete="off" enterkeyhint="send" />
      <button id="sendBtn">Send</button>
    </div>

    <div class="footer">Made on üåè with ‚ù§Ô∏è  ‚Äî <a href="https://rahultushar-git.github.io/fosChat/">Back to main site</a></div>
  </div>

<script>
  function addMessage(text, type = 'anon', label = 'Anonymous') {
    const chat = document.getElementById('chat');

    const row = document.createElement('div');
    row.className = 'message-row ' + (type === 'you' ? 'you' : 'anon');

    const bubble = document.createElement('div');
    bubble.className = 'msg ' + (type === 'you' ? 'you' : 'anon');

    const lbl = document.createElement('div');
    lbl.className = 'label';
    lbl.textContent = label;

    const txt = document.createElement('div');
    txt.className = 'text';
    txt.textContent = text;

    bubble.appendChild(lbl);
    bubble.appendChild(txt);
    row.appendChild(bubble);
    chat.appendChild(row);

    chat.scrollTop = chat.scrollHeight;
  }

  const WS_URL = 'wss://anar-aeou.onrender.com';
  let ws;

  function connect() {
    ws = new WebSocket(WS_URL);

    ws.addEventListener('open', () => addMessage('Connected to server.', 'anon', 'System'));
    ws.addEventListener('message', (ev) => addMessage(String(ev.data), 'anon', 'Anonymous'));
    ws.addEventListener('close', () => addMessage('Disconnected from server.', 'anon', 'System'));
  }
  connect();

  function send() {
    const input = document.getElementById('msg');
    const text = input.value.trim();
    if (!text) return;

    addMessage(text, 'you', 'You');
    if (ws && ws.readyState === WebSocket.OPEN) ws.send(text);

    input.value = '';
    input.focus();
  }

  document.getElementById('sendBtn').addEventListener('click', send);
  document.getElementById('msg').addEventListener('keydown', (e)=>{
    if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); send(); }
  });
</script>
</body>
</html>
